import type { NextPage } from 'next';
import Head from 'next/head';
import Image from 'next/image';
import Link from 'next/link';
import Countdown from '../components/Countdown';
import Navbar from '../components/Navbar';
import RACE from '../data/race.json';
import ReactPlayer from 'react-player';
import { useSelector } from 'react-redux';
import { RootState } from '../store/rootReducer';
import MarketplaceCard from '../components/MarketplaceCard';
import useWindowSize from '../hooks/useWindowSize';

const Home: NextPage = () => {
  const { marketItems } = useSelector((state: RootState) => state.marketplace);

  const size = useWindowSize();

  return (
    <div className="text-center text-red-700">
      <Head>
        <title>Pit Stop</title>
        <meta name="description" content="Generated by create next app" />
        <link
          rel="icon"
          type="image/png"
          href="/favicon-16x16.png"
          sizes="16x16"
        />
      </Head>

      <Navbar />

      <div className="w-full md:mt-8 relative">
        <Image src={require(`../public/img/mesh.png`)} />
        <div className="left__hero">
          <div>
            <h1 className="text-white text-lg md:text-3xl lg:text-5xl font-bold md:w-96">
              Built for the love of Racing.
            </h1>
            <p className="text-white text-2xs md:text-base lg:text-xl mt-3 md:mt-10">
              Build your garage. Back your favourite drivers.
              <br />
              Get to the top of leaderboard.
              <br />
              Let&apos;s go racing.
            </p>

            <Link href="/mint">
              <button className="mt-3 md:mt-10 bg-gradient-to-r from-redOne to-redTwo rounded-lg px-10 py-2 font-semibold text-white text-2xs md:text-xl border-2 border-black">
                Get Started
              </button>
            </Link>
          </div>
        </div>
        <div
          className="right__hero"
          style={{
            boxShadow: '0 0 50px #CB2D3E'
          }}
        >
          <ReactPlayer
            url="https://ipfs.infura.io/ipfs/Qme5wyu9XTLvZbmrX8BeHTzq8bJZo4bAJdRKfZxxFAJMht"
            loop={true}
            muted={true}
            playing={true}
            width={size.width >= 1280 ? 640 : size.width >= 1000 ? 533 : 320}
            height={size.width >= 1280 ? 360 : size.width >= 1000 ? 300 : 180}
            style={{
              borderRadius: '12px',
              overflow: 'hidden'
            }}
          />
        </div>
      </div>

      <div className="w-4/5 mx-auto my-10 grid grid-cols-1 md:grid-cols-3">
        <div className="px-10 py-0 md:py-3">
          <div className="h-64 flex items-center justify-center">
            <Image
              src={require(`../public/img/collect.svg`)}
              width={266}
              height={193}
            />
          </div>
          <h1 className="text-white font-bold text-lg md:text-3xl">Collect</h1>
          <p className="text-white text-2xs md:text-base">
            Get started by minting the livery of your choice and create your own
            garage.
          </p>
        </div>
        <div className="px-10 py-0 md:py-3">
          <div className="h-64 flex items-center justify-center">
            <Image
              src={require(`../public/img/support.svg`)}
              width={233}
              height={190}
            />
          </div>
          <h1 className="text-white font-bold text-lg md:text-3xl">Support</h1>
          <p className="text-white text-2xs md:text-base">
            Use your NFTs to back your favourite drivers in real world grand
            prix.
          </p>
        </div>
        <div className="px-10 py-0 md:py-3">
          <div className="h-64 flex items-center justify-center">
            <Image
              src={require(`../public/img/win.svg`)}
              width={372}
              height={193}
            />
          </div>
          <h1 className="text-white font-bold text-lg md:text-3xl">Win</h1>
          <p className="text-white text-2xs md:text-base">
            Climb the leaderboards and earn rewards or sell your liveries on our
            marketplace.
          </p>
        </div>
      </div>

      {marketItems && marketItems.length >= 3 && (
        <div className="w-full px-14">
          <div className="w-full flex justify-between">
            <div className="text-white text-3xl font-bold text-left">
              Trending Liveries
            </div>
            <Link href="/marketplace">
              <div className="flex items-center cursor-pointer text-gray-mute hover:border-b-2 hover:border-gray-mute text-xl font-bold">
                <span className="mr-3">Marketplace</span>
                <Image
                  src={require(`../public/img/arrow.svg`)}
                  width={26}
                  height={26}
                />
              </div>
            </Link>
          </div>
          <div className="flex my-8">
            {marketItems.slice(0, 3).map((item: any) => (
              <MarketplaceCard key={item.itemId} NFT={item} small />
            ))}
          </div>
        </div>
      )}

      <div className="bg-gradient-to-r from-redOne to-redTwo w-full py-10 mt-12">
        <h1 className="text-white text-center text-3xl font-bold">
          {RACE.name}
        </h1>
        <p className="text-white text-center text-lg mt-2">Starts In</p>
        <div className="w-1/4 mx-auto my-4">
          <Countdown timestamp={RACE.timestamp} />
        </div>
        <Link href="/race">
          <button className="border-2 border-black bg-gradient-to-r from-redOne to-redTwo rounded-lg px-10 py-2 font-semibold text-white text-xl">
            Let&apos;s Go!
          </button>
        </Link>
      </div>
    </div>
  );
};

export default Home;
